<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Extending · PressureDrop.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PressureDrop.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Overview</a></li><li><a class="toctext" href="../core/">Core functions</a></li><li><a class="toctext" href="../plotting/">Plotting</a></li><li><a class="toctext" href="../correlations/">Pressure &amp; temperature correlations</a></li><li><a class="toctext" href="../pvt/">PVT properties</a></li><li><a class="toctext" href="../valves/">Valve calculations</a></li><li><a class="toctext" href="../utilities/">Utilities</a></li><li class="current"><a class="toctext" href>Extending</a><ul class="internal"></ul></li><li><a class="toctext" href="../similartools/">Similar tools</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Extending</a></li></ul><a class="edit-page" href="https://github.com/jnoynaert/PressureDrop.jl/blob/master/docs/src/extending.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Extending</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Extending-the-calculation-engine-1" href="#Extending-the-calculation-engine-1">Extending the calculation engine</a></h1><p>PVT or pressure/temperature correlations can easily be added, either by modifying the original source, or more simply by defining new functions in your script or session that match the interface of existing functions.</p><p>For example, to add a new PVT function, first inspect either the function signature, source, or documentation for one of the functions of the category you are adding to:</p><pre><code class="language-none">julia&gt; using PressureDrop

help?&gt; StandingSolutionGOR</code></pre><pre><code class="language-none">StandingSolutionGOR(APIoil, specificGravityGas, psiAbs, tempF, R_b, bubblepoint::Real)

Solution GOR (Rₛ) in scf/bbl.

Takes oil gravity (°API), gas specific gravity, pressure (psia), temp (°F), total solution GOR (R_b, scf/bbl), and bubblepoint value (psia).

&lt;other methods not shown&gt;</code></pre><p>Then simply define your new function, making sure to either utilize the same interface, or capture extra unneeded arguments.</p><pre><code class="language-none">function HanafySolutionGOR(APIoil, specificGravityGas, psiAbs, tempF, R_b, bubblepoint::Real)
  if

  elseif psiAbs &lt;= 157.28
    return 0
  else
    return -49.069 + 0.312 * psiAbs
end</code></pre><p>The new PVT function can now be added to an existing model (or used in a pressure traverse function call or the creation of a new model):</p><pre><code class="language-none">oldmodel.solutionGORcorrelation = HanafySolutionGOR</code></pre><p>Note that in this example the new method for solution GOR will only handle bubble points defined in absolute pressure.</p><p>Utilizing <code>RCall</code>, <code>PyCall</code>, or <code>ccall</code> will also allow adding functions defined in R, Python, and C or Fortran respectively.</p><p>As of v1.0, defining new correlations or model functions that require additional arguments is not supported without modifying the source. However, feel free to either submit a pull request or open an issue requesting the additional functionality (include reference to the source material and several test cases).</p><footer><hr/><a class="previous" href="../utilities/"><span class="direction">Previous</span><span class="title">Utilities</span></a><a class="next" href="../similartools/"><span class="direction">Next</span><span class="title">Similar tools</span></a></footer></article></body></html>
